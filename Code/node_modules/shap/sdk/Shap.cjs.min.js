/*!
 * Shap.js v1.1.2
 * homepage: https://shap-admin.faas.elenet.me
 */
"use strict";function __$styleInject(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");return o.type="text/css",n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),t}function castArray(e){return null==e?[]:Array.isArray(e)?e:[e]}function createElement(e,t){var n=e.tag,o=e.props,i=e.children,r=o.class,s=o.on,a=o.style,c=n.replace(/(^[^.]+)|(#.+)/g,"").slice(1).replace(/\./g," "),d=createElementNode(n.replace(/(\.|#).+/g,""));c&&(d.className=c);for(var p in r)r[p]&&d.classList.add(p);for(var u in a)d.style[u]=a[u];var l=function(e){d.addEventListener(e,function(n){return s[e].call(t,n)})};for(var f in s)l(f);return i.forEach(function(e){var n=e instanceof VNode?createElement(e,t):createTextNode(e);d.appendChild(n)}),d}function createCommentNode(){return document.createComment("")}function patch(e,t,n){var o=t.props.class,i=e.props.class;for(var r in o){var s=o[r];i[r]!==s&&n.classList[s?"add":"remove"](r)}}function createElement$1(e,t,n){return null==n&&isType(t,["string","array"])?new VNode(e,void 0,castArray(t)):new VNode(e,t,castArray(n))}var Api=function(){function e(e){this._config=e,this._key=e.key,this._plugins=[]}return e.filterBaaSKeywords=function(t){if(!t)return t;for(var n=0,o=e.baas;n<o.length;n++){t[o[n]]=void 0}return t},e.prototype.handleBaaSPayload=function(t){for(var n=this._plugins,o=this._key,i=Object.assign({},e.filterBaaSKeywords(t),{key:o}),r=0,s=n;r<s.length;r++){var a=s[r];Object.assign(i,a(i)||{})}return JSON.stringify(i)},e.prototype.mosaicRequestURL=function(e){var t=this._config.dev;return"https://"+(void 0!==t&&t?"ssr.alpha.elenet.me/shap-api":"ssr.ele.me/shap-api")+"/"+e},e.prototype.request=function(e,t,n){void 0===e&&(e="post"),void 0===n&&(n={});var o=this.mosaicRequestURL.bind(this,t),i=e.toLowerCase(),r="get"===i?o(void 0,n):o();return fetch(r,{headers:new Headers({"content-type":"application/json"}),method:i.toUpperCase(),body:"get"===i?null:this.handleBaaSPayload(n)}).then(function(e){return e.json()})},e.prototype.plugin=function(e){this._plugins.push(e)},e.baas=["_id","createdAt","updatedAt"],e}();["patch","post","get","delete"].forEach(function(e){Api.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.request.apply(this,[e].concat(t))}}),__$styleInject('@import "//at.alicdn.com/t/font_474845_663hu195llsaif6r.css";.sp__container--suspension{overflow-x:hidden;position:fixed;right:20px;bottom:0;z-index:100;-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.1);box-shadow:0 2px 4px 0 rgba(0,0,0,.1);font-size:12px}.sp__container--suspension .sp__header{padding:10px 25px;background:-webkit-gradient(linear,right top,left top,from(rgba(70,160,252,.5)),to(#46a0fc));background:linear-gradient(270deg,rgba(70,160,252,.5),#46a0fc);border-top-left-radius:4px;border-top-right-radius:4px;cursor:pointer;color:#fff}.sp__container--suspension .sp__header i{padding-right:3px;vertical-align:-2px}.sp__container--suspension.sp__container--full .sp__body{height:100px}.sp__container--suspension .sp__body{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:0;-webkit-transition:height .4s;transition:height .4s;-webkit-transition-timing-function:ease;transition-timing-function:ease;background:#fff;overflow:hidden}.sp__container--suspension .sp__body .sp__button{padding:8px 18px;border:1px solid #d8dce6;border-radius:4px;background:#fff;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;color:#5a5e66;font-size:16px;font-weight:400;cursor:pointer;outline:none}.sp__container--suspension .sp__body .sp__button i{font-size:15px}.sp__container--suspension .sp__body .sp__button:hover{border-color:#3a8ee6;-webkit-transform:translateY(-2px);transform:translateY(-2px);color:#3a8ee6;outline:none}.sp__container--suspension .sp__body .sp__button:first-of-type{margin-right:8px}.sp__container--suspension.sp__container--feedback .sp__feedback{opacity:1;z-index:1;-webkit-transform:translateX(0)!important;transform:translateX(0)!important}.sp__container--suspension .sp__feedback{position:absolute;opacity:0;z-index:-1;top:0;right:0;bottom:0;left:0;height:100px;line-height:100px;-webkit-transform:translateX(30%);transform:translateX(30%);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;background:#fff;text-align:center;font-size:13px;cursor:default;color:#5e6d82}',void 0);var suspension=function(e){var t=this,n=function(e){return{class:{sp__button:!0},on:{click:t.sendDocFeedback.bind(t,e),mouseenter:function(){t.deviation=e?"-":""}}}},o=[e("header.sp__header",{on:{click:this.toggleFeedbackPanel}},[e("i.iconfont.icon-talk"),e("span",this.leadin)]),e("div.sp__body",[e("button",n(5),[e("i.iconfont.icon-smile")]),e("button",n(0),[e("i.iconfont.icon-sad")]),e("div.sp__feedback",{style:{transform:"translateX("+this.deviation+"30%)"}},this.feedback)])];return e("section.sp__container--suspension",{class:{"sp__container--feedback":this.voted,"sp__container--full":this.spreading}},o)},plugin=function(e,t){return{path:e?e():t?window.location.hash:window.location.pathname,title:document.title}},querySelector=document.querySelector.bind(document),toString=Object.prototype.toString,$=function(e){return e instanceof HTMLElement?e:querySelector(e)},isType=function(e,t){void 0===t&&(t="");var n=toString.call(e).slice(8,-1).toLowerCase();return Array.isArray(t)?t.map(function(e){return e.toLowerCase()}).includes(n):t.toLowerCase()===n},clone=function(e){return JSON.parse(JSON.stringify(e))},noop=function(){},attend=function(e){return e instanceof RegExp?e.test(window.location.href.replace(window.location.origin,"")):isType(e,"Function")?e():void 0},VNode=function(){return function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n=[]),this.tag=e,this.props=t,this.children=n}}(),createElementNode=document.createElement.bind(document),createTextNode=document.createTextNode.bind(document),Vue=function(){function e(t){var n=t.el,o=void 0===n?"":n,i=t.data,r=void 0===i?{}:i,s=t.methods,a=void 0===s?{}:s,c=t.render,d=t.created,p=void 0===d?noop:d;e._=clone(r),this._data=r,this.$el=$(o),this._render=c,this.$options={created:p};for(var u in a)this[u]=a[u].bind(this);this.observe(),this.render()}return e.prototype._render=function(e){},e.prototype.observe=function(){var e=this,t=this._data,n=function(n){Object.defineProperty(o,n,{get:function(){return t[n]},set:function(o){t[n]=o,e.patch()}})},o=this;for(var i in t)n(i)},e.prototype.patch=function(){var e=this._render(createElement$1);patch(this._vnode,e,this.$el),this._vnode=e},e.prototype.render=function(){var t=this._render(createElement$1),n=t?createElement(t,this):createCommentNode(),o=this.$el;if(document.body.replaceChild(n,o),this.$el=n,this._vnode=t,t){var i=clone(e._);for(var r in i)this[r]=i[r];this.$options.created.call(this)}},e._={},e}(),vm=function(e){var t=e.el,n=e.api,o=e.options,i=o.mode,r=o.formatter,s=o.hash,a=void 0!==s&&s,c=o.leadin,d=o.feedback,p=o.absence;return n.plugin(plugin.bind(null,r,a)),new Vue({el:t,data:{deviation:"",spreading:!1,voted:!1,previewScore:0,score:0,tooltip:{visible:!1,left:0},mode:i||"inline",leadin:c||"\u8fd9\u4e2a\u9875\u9762\u6709\u5e2e\u52a9\u5417\uff1f",feedback:d||"\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01"},methods:{toggleFeedbackPanel:function(){this.spreading=!this.spreading},sendDocFeedback:function(e){var t=this;n.post("doc",{vote:e}).then(function(){t.voted=!0,setTimeout(function(){t.spreading=!1},1e3)},noop)}},render:function(e){if(null==p||!attend(p))return suspension.call(this,e)},created:function(){n.post("pv").then(noop,noop)}})},Shap=function(){function e(e){this._options=e,this._key=e.key,this._dev=e.dev||!1,this.render()}return e.prototype.render=function(){var e=this._key,t=this._dev,n=this._options,o=n.el,i=void 0===o?".shap-container":o,r=new Api({key:e,dev:t});this._vm=vm({el:i,api:r,options:n})},e.prototype.spa=function(){var e=this._vm;setTimeout(e.render.bind(e),4)},e}();module.exports=Shap;
//# sourceMappingURL=Shap.cjs.min.js.map
