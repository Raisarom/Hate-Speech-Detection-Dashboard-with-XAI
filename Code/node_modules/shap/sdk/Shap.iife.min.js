/*!
 * Shap.js v1.1.2
 * homepage: https://shap-admin.faas.elenet.me
 */
var Shap=function(){"use strict";function t(t){return null==t?[]:Array.isArray(t)?t:[t]}function e(t,n){var i=t.tag,o=t.props,r=t.children,s=o.class,a=o.on,c=o.style,d=i.replace(/(^[^.]+)|(#.+)/g,"").slice(1).replace(/\./g," "),l=u(i.replace(/(\.|#).+/g,""));d&&(l.className=d);for(var h in s)s[h]&&l.classList.add(h);for(var _ in c)l.style[_]=c[_];var b=function(t){l.addEventListener(t,function(e){return a[t].call(n,e)})};for(var v in a)b(v);return r.forEach(function(t){var i=t instanceof p?e(t,n):f(t);l.appendChild(i)}),l}function n(e,n,i){return null==i&&a(n,["string","array"])?new p(e,void 0,t(n)):new p(e,n,t(i))}var i=function(){function t(t){this._config=t,this._key=t.key,this._plugins=[]}return t.filterBaaSKeywords=function(e){if(!e)return e;for(var n=0,i=t.baas;n<i.length;n++){e[i[n]]=void 0}return e},t.prototype.handleBaaSPayload=function(e){for(var n=this._plugins,i=this._key,o=Object.assign({},t.filterBaaSKeywords(e),{key:i}),r=0,s=n;r<s.length;r++){var a=s[r];Object.assign(o,a(o)||{})}return JSON.stringify(o)},t.prototype.mosaicRequestURL=function(t){var e=this._config.dev;return"https://"+(void 0!==e&&e?"ssr.alpha.elenet.me/shap-api":"ssr.ele.me/shap-api")+"/"+t},t.prototype.request=function(t,e,n){void 0===t&&(t="post"),void 0===n&&(n={});var i=this.mosaicRequestURL.bind(this,e),o=t.toLowerCase(),r="get"===o?i(void 0,n):i();return fetch(r,{headers:new Headers({"content-type":"application/json"}),method:o.toUpperCase(),body:"get"===o?null:this.handleBaaSPayload(n)}).then(function(t){return t.json()})},t.prototype.plugin=function(t){this._plugins.push(t)},t.baas=["_id","createdAt","updatedAt"],t}();["patch","post","get","delete"].forEach(function(t){i.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.request.apply(this,[t].concat(e))}}),function(t,e){if("undefined"==typeof document)return e;t=t||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}('@import "//at.alicdn.com/t/font_474845_663hu195llsaif6r.css";.sp__container--suspension{overflow-x:hidden;position:fixed;right:20px;bottom:0;z-index:100;-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.1);box-shadow:0 2px 4px 0 rgba(0,0,0,.1);font-size:12px}.sp__container--suspension .sp__header{padding:10px 25px;background:-webkit-gradient(linear,right top,left top,from(rgba(70,160,252,.5)),to(#46a0fc));background:linear-gradient(270deg,rgba(70,160,252,.5),#46a0fc);border-top-left-radius:4px;border-top-right-radius:4px;cursor:pointer;color:#fff}.sp__container--suspension .sp__header i{padding-right:3px;vertical-align:-2px}.sp__container--suspension.sp__container--full .sp__body{height:100px}.sp__container--suspension .sp__body{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:0;-webkit-transition:height .4s;transition:height .4s;-webkit-transition-timing-function:ease;transition-timing-function:ease;background:#fff;overflow:hidden}.sp__container--suspension .sp__body .sp__button{padding:8px 18px;border:1px solid #d8dce6;border-radius:4px;background:#fff;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;color:#5a5e66;font-size:16px;font-weight:400;cursor:pointer;outline:none}.sp__container--suspension .sp__body .sp__button i{font-size:15px}.sp__container--suspension .sp__body .sp__button:hover{border-color:#3a8ee6;-webkit-transform:translateY(-2px);transform:translateY(-2px);color:#3a8ee6;outline:none}.sp__container--suspension .sp__body .sp__button:first-of-type{margin-right:8px}.sp__container--suspension.sp__container--feedback .sp__feedback{opacity:1;z-index:1;-webkit-transform:translateX(0)!important;transform:translateX(0)!important}.sp__container--suspension .sp__feedback{position:absolute;opacity:0;z-index:-1;top:0;right:0;bottom:0;left:0;height:100px;line-height:100px;-webkit-transform:translateX(30%);transform:translateX(30%);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;background:#fff;text-align:center;font-size:13px;cursor:default;color:#5e6d82}',void 0);var o=document.querySelector.bind(document),r=Object.prototype.toString,s=function(t){return t instanceof HTMLElement?t:o(t)},a=function(t,e){void 0===e&&(e="");var n=r.call(t).slice(8,-1).toLowerCase();return Array.isArray(e)?e.map(function(t){return t.toLowerCase()}).includes(n):e.toLowerCase()===n},c=function(t){return JSON.parse(JSON.stringify(t))},d=function(){},p=function(){return function(t,e,n){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===n&&(n=[]),this.tag=t,this.props=e,this.children=n}}(),u=document.createElement.bind(document),f=document.createTextNode.bind(document),l=function(){function t(e){var n=e.el,i=void 0===n?"":n,o=e.data,r=void 0===o?{}:o,a=e.methods,p=void 0===a?{}:a,u=e.render,f=e.created,l=void 0===f?d:f;t._=c(r),this._data=r,this.$el=s(i),this._render=u,this.$options={created:l};for(var h in p)this[h]=p[h].bind(this);this.observe(),this.render()}return t.prototype._render=function(t){},t.prototype.observe=function(){var t=this,e=this._data,n=function(n){Object.defineProperty(i,n,{get:function(){return e[n]},set:function(i){e[n]=i,t.patch()}})},i=this;for(var o in e)n(o)},t.prototype.patch=function(){var t=this._render(n);!function(t,e,n){var i=e.props.class,o=t.props.class;for(var r in i){var s=i[r];o[r]!==s&&n.classList[s?"add":"remove"](r)}}(this._vnode,t,this.$el),this._vnode=t},t.prototype.render=function(){var i=this._render(n),o=i?e(i,this):document.createComment(""),r=this.$el;if(document.body.replaceChild(o,r),this.$el=o,this._vnode=i,i){var s=c(t._);for(var a in s)this[a]=s[a];this.$options.created.call(this)}},t._={},t}();return function(){function t(t){this._options=t,this._key=t.key,this._dev=t.dev||!1,this.render()}return t.prototype.render=function(){var t=this._key,e=this._dev,n=this._options,o=n.el,r=void 0===o?".shap-container":o,s=new i({key:t,dev:e});this._vm=function(t){var e=t.el,n=t.api,i=t.options,o=i.mode,r=i.formatter,s=i.hash,c=void 0!==s&&s,p=i.leadin,u=i.feedback,f=i.absence;return n.plugin(function(t,e){return{path:t?t():e?window.location.hash:window.location.pathname,title:document.title}}.bind(null,r,c)),new l({el:e,data:{deviation:"",spreading:!1,voted:!1,previewScore:0,score:0,tooltip:{visible:!1,left:0},mode:o||"inline",leadin:p||"\u8fd9\u4e2a\u9875\u9762\u6709\u5e2e\u52a9\u5417\uff1f",feedback:u||"\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01"},methods:{toggleFeedbackPanel:function(){this.spreading=!this.spreading},sendDocFeedback:function(t){var e=this;n.post("doc",{vote:t}).then(function(){e.voted=!0,setTimeout(function(){e.spreading=!1},1e3)},d)}},render:function(t){if(null==f||!function(t){return t instanceof RegExp?t.test(window.location.href.replace(window.location.origin,"")):a(t,"Function")?t():void 0}(f))return function(t){var e=this,n=function(t){return{class:{sp__button:!0},on:{click:e.sendDocFeedback.bind(e,t),mouseenter:function(){e.deviation=t?"-":""}}}},i=[t("header.sp__header",{on:{click:this.toggleFeedbackPanel}},[t("i.iconfont.icon-talk"),t("span",this.leadin)]),t("div.sp__body",[t("button",n(5),[t("i.iconfont.icon-smile")]),t("button",n(0),[t("i.iconfont.icon-sad")]),t("div.sp__feedback",{style:{transform:"translateX("+this.deviation+"30%)"}},this.feedback)])];return t("section.sp__container--suspension",{class:{"sp__container--feedback":this.voted,"sp__container--full":this.spreading}},i)}.call(this,t)},created:function(){n.post("pv").then(d,d)}})}({el:r,api:s,options:n})},t.prototype.spa=function(){var t=this._vm;setTimeout(t.render.bind(t),4)},t}()}();
//# sourceMappingURL=Shap.iife.min.js.map
